<template name="application">
  <div class="application-main container-fluid">
    <!-- Prompts -->
    {{> addProject }}
    {{> removeProject }}
    {{> editCollaborators }}
    {{> addTask }}
    {{> removeTask }}
    <!-- Navigation -->
    {{> navigation }}
    <div class="application-top row">
      <div class="application-progress-bar col-xs-8">
        <div id="progress-bar" class="application-progression-bar progress">
          <div class="app-progress-bar progress-bar" role="progressbar" aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em;width:{{ progress }}%;">
            <h1> {{ progress }}% </h1>
          </div>
        </div>
      </div>
      <div class="application-deadline col-xs-4">
        <ul class="application-deadline">
          <li><h4>Date: {{ formatDate }}</h4></li>
          {{#with currentProject}}  
            <li><h4> Deadline: {{ deadlineDate }}</h4></li>
          {{/with }}
        </ul>
      </div>
    </div>
    <div class="row">
      <div class="application-progress col-xs-4 text-center">
      <!-- Add / Remove Project Buttons -->
        <div class="application-btn-group btn-group btn-group-md" role="group" aria-label="...">
          <button type="button" id="application-add-project" class="application-block-button btn btn-primary">
            Add Project
          </button>
          <button type="button" id="application-remove-project" class="application-block-button btn btn-primary">
            Remove Project
          </button>
        </div>
        <h2> Projects </h2>
        <ul class="application-progress">
          {{#each currentProjects }}
          <li> <button type="button" class="application-project-button application-progress btn btn-primary btn-lg btn-block" value="{{name}}">{{ name }}</button></li>
          {{/each}}
        </ul>
      </div>
      <div class="application-content col-xs-8">
        <div class="application-btn-group application-tasks btn-group btn-group-md" role="group" aria-label="...">
          <button type="button" id="application-edit-collaborators" class="application-block-button btn btn-primary">
            Edit Collaborators
          </button>
          <button type="button" id="application-add-task" class="application-block-button btn btn-primary">
            Add Task
          </button>
          <button type="button" id="application-remove-task" class="application-block-button btn btn-primary">
            Remove Task
          </button>
        </div>
        {{#with currentProject}} 
          {{#each this.tasks}}
            <div class="panel panel-primary">
              <div class="panel-heading"> 
                <i class="task-remove fa fa-times fa-1x" data-taskname="{{name}}" data-taskdescription="{{description}}"></i> 
                {{ name }}
              </div>
              <div class="panel-body">
                <p> Task Description: {{ description }} </p>
                <label>Complete: </label> 
                  {{#if complete}} 
                    <input type="checkbox" class="taskCheck" value="Task complete" checked>
                  {{else}}
                    <input type="checkbox" class="taskCheck" value="Task incomplete">
                  {{/if}} 
              </div>
            </div>
          {{/each}}
        {{/with}}
      </div>
    </div>
    <!-- Footer -->
    {{> footer }}
  </div>
</template>